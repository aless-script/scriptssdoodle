local Player = game:GetService("Players").LocalPlayer
local Client = require(Player.Packer.Client)

print("--- Scanner Active: Watching for Encounters ---")

-- Function to output stats safely to your console (F9) and a small label
local function displayStats(Enemy)
    local name = Enemy.Name or "Unknown"
    local stars = Enemy.Star or 0
    local trait = Enemy.Trait or "Unknown"
    local isMisprint = Enemy.Shiny and "YES" or "No"
    
    -- Print to Console (F9) for a permanent record of the encounter
    warn("--- NEW ENCOUNTER ---")
    print("Name: " .. name)
    print("Stars: " .. tostring(stars) .. " ‚≠ê")
    print("Misprint: " .. isMisprint)
    print("Trait: " .. trait)
    print("----------------------")

    -- Send a small notification in-game
    game.StarterGui:SetCore("SendNotification", {
        Title = name .. " (" .. stars .. " Star)";
        Text = "Trait: " .. trait .. " | Misprint: " .. isMisprint;
        Duration = 10;
    })
end

-- Monitor the battle state
task.spawn(function()
    local lastEnemyUID = nil
    while task.wait(0.5) do
        if Client.Battle and Client.Battle.CurrentBattle then
            local Enemy = Client.Battle.CurrentBattle["Player2Party"] and Client.Battle.CurrentBattle["Player2Party"][1]
            if Enemy and Enemy.ID ~= lastEnemyUID then
                lastEnemyUID = Enemy.ID
                displayStats(Enemy)
            end
        else
            lastEnemyUID = nil
        end
    end
end)
