-- Database Location Finder for Doodle World
print("=== Searching for Database ===")

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local ReplicatedFirst = game:GetService("ReplicatedFirst")
local Player = Players.LocalPlayer

-- Function to search recursively
local function searchForDatabase(parent, path, depth)
    if depth > 5 then return end -- Limit recursion depth
    
    for _, child in ipairs(parent:GetChildren()) do
        local currentPath = path .. "." .. child.Name
        
        -- Check if this is Database or DoodleInfo
        if child.Name == "Database" or child.Name == "DoodleInfo" then
            print("✓ FOUND:", currentPath, "| ClassName:", child.ClassName)
        end
        
        -- Check if it's a ModuleScript that might contain Database
        if child:IsA("ModuleScript") then
            local success, result = pcall(function()
                return require(child)
            end)
            
            if success and type(result) == "table" then
                if result.Database or result.DoodleInfo then
                    print("✓ FOUND IN MODULE:", currentPath)
                    if result.Database then
                        print("  → Has Database property")
                    end
                    if result.DoodleInfo then
                        print("  → Has DoodleInfo property")
                    end
                end
            end
        end
        
        -- Continue searching children
        if child:IsA("Folder") or child:IsA("ModuleScript") or child.Name:match("Client") or child.Name:match("Script") then
            searchForDatabase(child, currentPath, depth + 1)
        end
    end
end

-- Search in LocalPlayer
print("\n--- Searching in LocalPlayer ---")
for _, child in ipairs(Player:GetChildren()) do
    print("Found in Player:", child.Name, "| Type:", child.ClassName)
    if child:IsA("ModuleScript") or child:IsA("Folder") or child.Name == "Client" then
        searchForDatabase(child, "game.Players.LocalPlayer." .. child.Name, 1)
    end
end

-- Search in PlayerScripts
print("\n--- Searching in PlayerScripts ---")
local PlayerScripts = Player:FindFirstChild("PlayerScripts")
if PlayerScripts then
    searchForDatabase(PlayerScripts, "game.Players.LocalPlayer.PlayerScripts", 0)
else
    print("PlayerScripts not found")
end

-- Search in ReplicatedStorage
print("\n--- Searching in ReplicatedStorage ---")
searchForDatabase(ReplicatedStorage, "game.ReplicatedStorage", 0)

-- Search in ReplicatedFirst
print("\n--- Searching in ReplicatedFirst ---")
searchForDatabase(ReplicatedFirst, "game.ReplicatedFirst", 0)

-- Also check if Client exists and what it contains
print("\n--- Checking Client Module ---")
local Client = Player:FindFirstChild("Client")
if Client then
    print("Client found! Children:")
    for _, child in ipairs(Client:GetChildren()) do
        print(" -", child.Name, "| Type:", child.ClassName)
    end
    
    -- Try to require it
    local success, clientModule = pcall(function()
        return require(Client)
    end)
    
    if success then
        print("\nClient module properties:")
        for key, value in pairs(clientModule) do
            print(" -", key, "| Type:", type(value))
            if key == "Database" or key == "DoodleInfo" then
                print("   ✓✓✓ FOUND DATABASE HERE! ✓✓✓")
            end
        end
    end
else
    print("Client not found in LocalPlayer")
end

print("\n=== Search Complete ===")
print("Look for lines with ✓ FOUND above")
