local player = game:GetService("Players").LocalPlayer

-- Create GUI
local gui = Instance.new("ScreenGui")
gui.Name = "DoodleStatViewer"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame
local main = Instance.new("Frame")
main.Size = UDim2.new(0, 450, 0, 550)
main.Position = UDim2.new(0.5, -225, 0.5, -275)
main.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
main.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = main

-- Title Bar
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
title.BorderSizePixel = 0
title.Text = "üîç Doodle Stat Viewer"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = main

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 10)
titleCorner.Parent = title

-- Close Button
local close = Instance.new("TextButton")
close.Size = UDim2.new(0, 30, 0, 30)
close.Position = UDim2.new(1, -35, 0, 5)
close.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
close.Text = "X"
close.TextColor3 = Color3.fromRGB(255, 255, 255)
close.Font = Enum.Font.GothamBold
close.TextSize = 14
close.BorderSizePixel = 0
close.Parent = title

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = close

close.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, -20, 0, 30)
statusLabel.Position = UDim2.new(0, 10, 0, 50)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "‚è≥ Waiting for doodle encounter..."
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.Font = Enum.Font.GothamBold
statusLabel.TextSize = 13
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = main

-- Doodle Info Frame
local infoFrame = Instance.new("ScrollingFrame")
infoFrame.Size = UDim2.new(1, -20, 0, 420)
infoFrame.Position = UDim2.new(0, 10, 0, 90)
infoFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
infoFrame.BorderSizePixel = 0
infoFrame.ScrollBarThickness = 6
infoFrame.Visible = false
infoFrame.Parent = main

local infoCorner = Instance.new("UICorner")
infoCorner.CornerRadius = UDim.new(0, 8)
infoCorner.Parent = infoFrame

local infoList = Instance.new("UIListLayout")
infoList.Padding = UDim.new(0, 8)
infoList.Parent = infoFrame

local infoPadding = Instance.new("UIPadding")
infoPadding.PaddingTop = UDim.new(0, 10)
infoPadding.PaddingLeft = UDim.new(0, 10)
infoPadding.PaddingRight = UDim.new(0, 10)
infoPadding.Parent = infoFrame

-- Copy ID Button
local copyBtn = Instance.new("TextButton")
copyBtn.Size = UDim2.new(1, -20, 0, 35)
copyBtn.Position = UDim2.new(0, 10, 1, -45)
copyBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 255)
copyBtn.Text = "üìã Copy Doodle ID"
copyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
copyBtn.Font = Enum.Font.GothamBold
copyBtn.TextSize = 13
copyBtn.BorderSizePixel = 0
copyBtn.Visible = false
copyBtn.Parent = main

local copyCorner = Instance.new("UICorner")
copyCorner.CornerRadius = UDim.new(0, 6)
copyCorner.Parent = copyBtn

gui.Parent = game:GetService("CoreGui")

-- Helper function to create stat display
local function createStatLabel(text, value, color)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 25)
    label.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
    label.BorderSizePixel = 0
    label.Text = text .. ": " .. tostring(value)
    label.TextColor3 = color or Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.Gotham
    label.TextSize = 12
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = infoFrame
    
    local padding = Instance.new("UIPadding")
    padding.PaddingLeft = UDim.new(0, 10)
    padding.Parent = label
    
    local labelCorner = Instance.new("UICorner")
    labelCorner.CornerRadius = UDim.new(0, 6)
    labelCorner.Parent = label
    
    return label
end

-- Helper function to create section header
local function createHeader(text)
    local header = Instance.new("TextLabel")
    header.Size = UDim2.new(1, 0, 0, 30)
    header.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    header.BorderSizePixel = 0
    header.Text = text
    header.TextColor3 = Color3.fromRGB(100, 200, 255)
    header.Font = Enum.Font.GothamBold
    header.TextSize = 14
    header.TextXAlignment = Enum.TextXAlignment.Left
    header.Parent = infoFrame
    
    local padding = Instance.new("UIPadding")
    padding.PaddingLeft = UDim.new(0, 10)
    padding.Parent = header
    
    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 6)
    headerCorner.Parent = header
    
    return header
end

-- Function to parse and display doodle data
local currentDoodleID = nil

local function displayDoodleData(data)
    -- Clear previous data
    for _, child in ipairs(infoFrame:GetChildren()) do
        if not child:IsA("UIListLayout") and not child:IsA("UIPadding") then
            child:Destroy()
        end
    end
    
    if type(data) ~= "table" then
        statusLabel.Text = "‚ùå Invalid data format"
        infoFrame.Visible = false
        copyBtn.Visible = false
        return
    end
    
    statusLabel.Text = "‚úÖ Doodle Encountered!"
    infoFrame.Visible = true
    copyBtn.Visible = true
    
    -- Basic Info
    createHeader("üìã Basic Information")
    
    if data.ID or data.id then
        currentDoodleID = tostring(data.ID or data.id)
        createStatLabel("ID", currentDoodleID, Color3.fromRGB(100, 200, 255))
    end
    
    if data.Name or data.name then
        createStatLabel("Name", data.Name or data.name, Color3.fromRGB(255, 200, 100))
    end
    
    if data.Level or data.level then
        createStatLabel("Level", data.Level or data.level, Color3.fromRGB(150, 255, 150))
    end
    
    if data.Species or data.species then
        createStatLabel("Species", data.Species or data.species, Color3.fromRGB(255, 150, 255))
    end
    
    -- Stats
    if data.Stats or data.stats then
        createHeader("‚öîÔ∏è Stats")
        local stats = data.Stats or data.stats
        
        if type(stats) == "table" then
            for statName, statValue in pairs(stats) do
                local color = Color3.fromRGB(200, 200, 200)
                if statName:lower():find("hp") or statName:lower():find("health") then
                    color = Color3.fromRGB(255, 100, 100)
                elseif statName:lower():find("attack") then
                    color = Color3.fromRGB(255, 150, 100)
                elseif statName:lower():find("defense") then
                    color = Color3.fromRGB(100, 150, 255)
                elseif statName:lower():find("speed") then
                    color = Color3.fromRGB(100, 255, 200)
                end
                createStatLabel(statName, statValue, color)
            end
        end
    end
    
    -- IVs (Individual Values)
    if data.IVs or data.ivs then
        createHeader("üß¨ IVs (Individual Values)")
        local ivs = data.IVs or data.ivs
        
        if type(ivs) == "table" then
            for ivName, ivValue in pairs(ivs) do
                createStatLabel(ivName, ivValue, Color3.fromRGB(255, 255, 150))
            end
        end
    end
    
    -- Traits/Abilities
    if data.Trait or data.trait or data.Ability or data.ability then
        createHeader("‚ú® Traits/Abilities")
        createStatLabel("Trait", data.Trait or data.trait or data.Ability or data.ability, Color3.fromRGB(255, 200, 255))
    end
    
    if data.HiddenTrait or data.hiddenTrait then
        createStatLabel("Hidden Trait", data.HiddenTrait or data.hiddenTrait, Color3.fromRGB(255, 100, 255))
    end
    
    -- Skin/Appearance
    if data.Skin or data.skin or data.Color or data.color or data.Shiny or data.shiny then
        createHeader("üé® Appearance")
        
        if data.Skin or data.skin then
            createStatLabel("Skin", data.Skin or data.skin, Color3.fromRGB(255, 200, 150))
        end
        
        if data.Color or data.color then
            createStatLabel("Color", data.Color or data.color, Color3.fromRGB(150, 200, 255))
        end
        
        if data.Shiny or data.shiny then
            local isShiny = data.Shiny or data.shiny
            createStatLabel("Shiny", tostring(isShiny), Color3.fromRGB(255, 215, 0))
        end
    end
    
    -- Moves/Skills
    if data.Moves or data.moves or data.Skills or data.skills then
        createHeader("üí´ Moves/Skills")
        local moves = data.Moves or data.moves or data.Skills or data.skills
        
        if type(moves) == "table" then
            for i, move in ipairs(moves) do
                if type(move) == "table" then
                    local moveName = move.Name or move.name or "Move " .. i
                    createStatLabel(moveName, move.Power or move.power or "N/A", Color3.fromRGB(200, 150, 255))
                else
                    createStatLabel("Move " .. i, move, Color3.fromRGB(200, 150, 255))
                end
            end
        end
    end
    
    -- Additional Data (catch-all for other properties)
    local displayedKeys = {
        ID = true, id = true, Name = true, name = true, Level = true, level = true,
        Species = true, species = true, Stats = true, stats = true, IVs = true, ivs = true,
        Trait = true, trait = true, Ability = true, ability = true,
        HiddenTrait = true, hiddenTrait = true, Skin = true, skin = true,
        Color = true, color = true, Shiny = true, shiny = true,
        Moves = true, moves = true, Skills = true, skills = true
    }
    
    local hasOtherData = false
    for key, value in pairs(data) do
        if not displayedKeys[key] and type(value) ~= "table" then
            if not hasOtherData then
                createHeader("üìä Additional Data")
                hasOtherData = true
            end
            createStatLabel(key, value, Color3.fromRGB(180, 180, 180))
        end
    end
    
    infoFrame.CanvasSize = UDim2.new(0, 0, 0, infoList.AbsoluteContentSize.Y + 20)
end

-- Copy button functionality
copyBtn.MouseButton1Click:Connect(function()
    if currentDoodleID then
        setclipboard(currentDoodleID)
        copyBtn.Text = "‚úÖ ID Copied!"
        task.wait(2)
        copyBtn.Text = "üìã Copy Doodle ID"
    end
end)

-- Hook into game remotes to capture doodle data
local function hookDoodleData()
    local oldNamecall
    oldNamecall = hookmetamethod(game, "__namecall", newcclosure(function(self, ...)
        local method = getnamecallmethod()
        local args = {...}
        
        if method == "FireServer" or method == "InvokeServer" then
            local success, remoteName = pcall(function() return self.Name end)
            
            if success and remoteName then
                local lowerName = remoteName:lower()
                
                -- Look for encounter/battle/wild remotes
                if lowerName:find("encounter") or lowerName:find("battle") or 
                   lowerName:find("wild") or lowerName:find("spawn") or 
                   lowerName:find("catch") or lowerName:find("doodle") then
                    
                    print("[Doodle Viewer] üéØ Detected: " .. remoteName)
                    
                    -- Check all arguments for table data
                    for i, arg in ipairs(args) do
                        if type(arg) == "table" then
                            print("[Doodle Viewer] üì¶ Table found in arg #" .. i)
                            print("[Doodle Viewer] üìã Contents:")
                            for k, v in pairs(arg) do
                                if type(v) ~= "table" then
                                    print("    " .. tostring(k) .. " = " .. tostring(v))
                                else
                                    print("    " .. tostring(k) .. " = [table]")
                                end
                            end
                            
                            task.spawn(function()
                                displayDoodleData(arg)
                            end)
                            break
                        end
                    end
                end
            end
        end
        
        return oldNamecall(self, ...)
    end))
    
    print("[Doodle Viewer] ‚úÖ Hooks active!")
    print("[Doodle Viewer] üëÄ Watching for encounter remotes...")
end

-- Initialize
task.spawn(function()
    task.wait(1)
    hookDoodleData()
end)

-- Manual test function
_G.testDoodleViewer = function(data)
    displayDoodleData(data)
end

_G.showDoodleViewer = function()
    gui.Enabled = true
end

_G.hideDoodleViewer = function()
    gui.Enabled = false
end

print([[
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
  üîç DOODLE STAT VIEWER
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ Loaded! Listening for encounters
üìä GUI will show when doodles spawn
üîß Check console for remote names

Commands:
  _G.testDoodleViewer({data})
  _G.showDoodleViewer()
  _G.hideDoodleViewer()
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
]])
