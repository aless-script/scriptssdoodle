-- [[ STANDALONE DOODLE SPY TOOL ]]
local Player = game:GetService("Players").LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Clean up old UI if it exists
if PlayerGui:FindFirstChild("SpyHUD") then PlayerGui.SpyHUD:Destroy() end

-- [ CREATE UI ]
local sg = Instance.new("ScreenGui", PlayerGui); sg.Name = "SpyHUD"
local main = Instance.new("Frame", sg)
main.Size = UDim2.new(0, 280, 0, 220)
main.Position = UDim2.new(0, 20, 0.5, -110) -- Left side of screen
main.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
main.BorderSizePixel = 2
main.BorderColor3 = Color3.fromRGB(0, 180, 255)
main.Draggable = true
main.Active = true

local header = Instance.new("TextLabel", main)
header.Size = UDim2.new(1, 0, 0, 35)
header.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
header.Text = "üîç DOODLE INSPECTOR"
header.TextColor3 = Color3.new(1, 1, 1)
header.TextSize = 16
header.Font = Enum.Font.GothamBold

local info = Instance.new("TextLabel", main)
info.Size = UDim2.new(0.9, 0, 0.7, 0)
info.Position = UDim2.new(0.05, 0, 0.22, 0)
info.BackgroundTransparency = 1
info.TextColor3 = Color3.new(0.9, 0.9, 0.9)
info.TextSize = 16
info.TextXAlignment = Enum.TextXAlignment.Left
info.TextYAlignment = Enum.TextYAlignment.Top
info.Text = "Waiting for battle..."

-- [ DATA REFRESH LOGIC ]
task.spawn(function()
    while task.wait(0.5) do
        local success, battleData = pcall(function()
            return Player.Remotes.PlayerDataFunc:InvokeServer("GetBattleData")
        end)
        
        if success and battleData and battleData.Opponent then
            local enemy = battleData.Opponent
            
            -- Dynamic Star coloring
            local starRating = enemy.Star or 0
            if starRating >= 6 then main.BorderColor3 = Color3.fromRGB(255, 0, 0) -- Red for 6*
            elseif starRating >= 5 then main.BorderColor3 = Color3.fromRGB(255, 215, 0) -- Gold for 5*
            else main.BorderColor3 = Color3.fromRGB(0, 180, 255) end -- Blue for normal

            info.Text = string.format(
                "Name: %s\nStars: %s ‚≠ê\nTrait: %s\nSkin: %s\nHeld Item: %s\nMisprint: %s",
                tostring(enemy.Name or "???"),
                tostring(starRating),
                tostring(enemy.Trait or "None"),
                tostring(enemy.Skin or "Default"),
                tostring(enemy.HeldItem or "None"),
                enemy.Shiny and "YES ‚ú®" or "No"
            )
        else
            info.Text = "‚ùå NO ACTIVE BATTLE\n\nWalk into grass to\nsee opponent stats."
            main.BorderColor3 = Color3.fromRGB(100, 100, 100)
        end
    end
end)
