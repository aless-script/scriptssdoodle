-- 1. ACCESS GAME INTERNALS (Based on the script you shared)
local player = game:GetService("Players").LocalPlayer
local packer = player:WaitForChild("Packer")
local client = require(packer:WaitForChild("Client"))

-- 2. CREATE GUI (Simplified to ensure it loads)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SimpleHunterV4"
ScreenGui.Parent = game:GetService("CoreGui")

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 200, 0, 250)
MainFrame.Position = UDim2.new(0.4, 0, 0.4, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local Status = Instance.new("TextLabel")
Status.Size = UDim2.new(1, 0, 0, 50)
Status.Text = "Status: READY"
Status.TextColor3 = Color3.new(1,1,1)
Status.BackgroundTransparency = 1
Status.Parent = MainFrame

local StartBtn = Instance.new("TextButton")
StartBtn.Size = UDim2.new(0.8, 0, 0, 50)
StartBtn.Position = UDim2.new(0.1, 0, 0.3, 0)
StartBtn.Text = "START AUTO-HUNT"
StartBtn.Parent = MainFrame

local SyncBtn = Instance.new("TextButton")
SyncBtn.Size = UDim2.new(0.8, 0, 0, 50)
SyncBtn.Position = UDim2.new(0.1, 0, 0.6, 0)
SyncBtn.Text = "SYNC AREA"
SyncBtn.Parent = MainFrame

-- 3. LOGIC
getgenv().Running = false
getgenv().SavedArea = nil
getgenv().SavedSub = "WildGrass"

-- Use the "Inspiration" script method to get the area
SyncBtn.MouseButton1Click:Connect(function()
    local area = client.DataManager.RegionData.ChunkName or client.DataManager.RegionData.Reference
    if area then
        getgenv().SavedArea = area
        Status.Text = "Area Locked: " .. tostring(area)
    else
        Status.Text = "Error: Stand in Grass!"
    end
end)

StartBtn.MouseButton1Click:Connect(function()
    getgenv().Running = not getgenv().Running
    StartBtn.Text = getgenv().Running and "STOP" or "START AUTO-HUNT"
end)

-- 4. THE LOOP
task.spawn(function()
    while true do
        task.wait(1.5)
        if getgenv().Running and getgenv().SavedArea then
            local bData = player.Remotes.PlayerDataFunc:InvokeServer("GetBattleData")
            
            if not bData then
                -- TRIGGER ENCOUNTER
                player.Remotes.DudeWhyld:FireServer(getgenv().SavedArea, getgenv().SavedSub)
                Status.Text = "üì° Searching..."
            else
                local wild = bData.Opponent
                -- Check for Rares (Misprint or 5+ Stars)
                if wild.IsMisprint or (wild.Stars and wild.Stars >= 5) then
                    getgenv().Running = false
                    Status.Text = "‚ú® RARE FOUND! STOPPED."
                else
                    -- Auto-Run if not rare
                    game:GetService("ReplicatedStorage").Remotes.BattleRemote:FireServer("Run")
                    Status.Text = "üèÉ Running from " .. tostring(wild.Name)
                    repeat task.wait(1) until player.Remotes.PlayerDataFunc:InvokeServer("GetBattleData") == nil
                end
            end
        end
    end
end)
